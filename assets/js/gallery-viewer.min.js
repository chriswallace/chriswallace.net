document.addEventListener("DOMContentLoaded",(()=>{let e,t=null,n=null;const r=document.getElementById("art-collection");let i=r.querySelectorAll("img");const o=document.createElement("div");o.style.position="absolute",o.style.backgroundColor="black",o.style.color="white",o.style.padding="5px 10px",o.style.borderRadius="5px",o.style.display="none",o.style.zIndex="9999",document.body.appendChild(o);var l=document.createElement("canvas");function c(){try{return!(!window.WebGLRenderingContext||!l.getContext("webgl")&&!l.getContext("experimental-webgl"))}catch(e){return!1}}function d(){return/Mobi|Android/i.test(navigator.userAgent)}function s(e,t){if("true"===e.getAttribute("data-processed"))return;imgObserver.observe(e),e.addEventListener("mouseover",(function(e){const t=this.getAttribute("alt");t&&(o.textContent=t,o.style.display="block")})),e.addEventListener("mouseout",(function(){o.style.display="none"}));const n=document.createElement("div");n.classList.add("image-wrapper"),e.parentNode.insertBefore(n,e),n.appendChild(e),n.appendChild(o);const r=document.createElement("div");if(r.classList.add("maximize-icon"),d()&&e.alt.trim().length){const t=document.createElement("caption");t.innerHTML=e.alt,n.appendChild(t)}!d()&&c()&&(n.appendChild(r),r.addEventListener("click",(()=>f(e,t)))),e.setAttribute("data-processed","true")}const a=()=>{if(n&&clearTimeout(n),i=r.querySelectorAll("img"),null===t)return;t>=i.length-1&&E();const e=i[t],o=i[t+1];let l;if(l=e.getAttribute("data-iframe-src")?12e3:8e3,o&&!o.getAttribute("data-iframe-src")){const e=new Image,t=o.getAttribute("src");e.src=t}n=setTimeout((()=>{m(1),a()}),l)},u=document.getElementById("autoPlayCollection");u&&u.addEventListener("click",(()=>{f(document.querySelectorAll("img")[0],0,!0),a(),document.getElementById("playButton").click()})),i.forEach(((e,t)=>s(e,t))),document.addEventListener("keydown",(function(e){"ArrowLeft"===e.key?m(-1):"ArrowRight"===e.key&&m(1)}));const m=e=>{if(null===t)return;const n=i.length;let r=t+e;r<0||r>=n||(i[t].removeAttribute("data-is-current"),f(i[r],r))},f=(n,r,i=!1)=>{e=document.getElementById("fullscreen-viewer"),e||(e=document.createElement("div"),e.id="fullscreen-viewer",document.body.appendChild(e)),e.classList.add("fade-out"),setTimeout((()=>{const o=document.createElement("div");o.className="loader";const l=document.createElement("img"),c=n.getAttribute("src"),d=n.getAttribute("data-iframe-src"),s=n.getAttribute("data-iframe-size");if(document.querySelectorAll("[data-is-current='true']").forEach((e=>e.setAttribute("data-is-current","false"))),n.setAttribute("data-is-current","true"),l.onload=()=>{o.remove(),d&&m.appendChild(function(e,t,n){const r=document.createElement("button");return r.textContent="View Live",r.className="live-code-btn",r.addEventListener("click",(()=>{if(e){const r=t.offsetWidth,i=t.offsetHeight,o=document.createElement("div"),l=document.createElement("iframe");l.setAttribute("src",e),"fullscreen"===n?(l.setAttribute("width",window.innerWidth),l.setAttribute("height",window.innerHeight)):(l.setAttribute("width",r),l.setAttribute("height",i));const c=document.getElementById("fullscreen-viewer");c.innerHTML="",c.appendChild(o),o.appendChild(l)}})),r}(d,l,s))},e.classList.remove("hidden"),t=r,"fullscreen"===s&&d){const t=document.createElement("div"),n=document.createElement("iframe");return n.setAttribute("src",d),n.setAttribute("style","position: absolute; left: 0; top: 0; right: 0; bottom: 0; width: 100vw; height: 100vh;"),e.innerHTML="",e.appendChild(t),t.appendChild(n),e.className="",void(e.requestFullscreen&&e.requestFullscreen())}let u;u=c.endsWith(".gif")||c.includes(".gif?")?c.replace(/w-\d+,?/,""):c.replace(/w-\d+/,"w-"+2*window.innerWidth).replace(/q-\d+/,"q-90"),u=u.replace(/,bl-\d+/,""),l.src=u,l.setAttribute("src",u);const m=document.createElement("div");e.innerHTML="",e.appendChild(o),e.appendChild(m),m.appendChild(l),e.classList.remove("fade-out"),e.requestFullscreen&&e.requestFullscreen(),i&&a()}),750)};if(!d()&&c()){let y=document.getElementsByClassName("live-code");Array.from(y).forEach((e=>{let t=e.getAttribute("data-src");t&&(e.src=t)}))}const h=()=>{document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||(e.className="hidden",n&&clearTimeout(n))};document.addEventListener("fullscreenchange",h),document.addEventListener("webkitfullscreenchange",h),document.addEventListener("mozfullscreenchange",h),document.addEventListener("MSFullscreenChange",h);let g=0;const p=e=>{e.forEach((e=>v.observe(e)))};const b=document.querySelectorAll(".fade-in-element,.art-collection .image-wrapper,.art-collection h3,.art-collection h4");!function(e,t=66){if(!e||"function"!=typeof e)return;let n;window.addEventListener("scroll",(function(r){window.clearTimeout(n),n=setTimeout(e,t)}),!1)}((function(){g=0}));const v=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const t=50*g;((e,t)=>{setTimeout((()=>{e.classList.add("visible")}),t)})(e.target,t),v.unobserve(e.target),g++}}))}));function w(e){let t=1e4*Math.sin(e++);return t-Math.floor(t)}if(p(b),window.pageSettings){let A=!1,L=window.pageSettings.htmlParts;function E(){if(A)return;if(0===Object.keys(L).length)return;const e=Math.floor((new Date).getTime()/36e5),t=Object.keys(L);!function(e,t){let n,r=e.length;for(;0!==r;)n=Math.floor(w(t)*r),r--,[e[r],e[n]]=[e[n],e[r]]}(t,e);const n=t[0],r=L[n];delete L[n],A=!0,fetch(r).then((e=>e.text())).then((e=>{const t=document.getElementById("art-collection");t.insertAdjacentHTML("beforeend",e);t.querySelectorAll("img:not(.loaded)").forEach(((e,t)=>s(e,t)));const n=t.querySelectorAll(".fade-in-element:not(.visible),.art-collection .image-wrapper:not(.visible),.art-collection h3:not(.visible),.art-collection h4:not(.visible)");p(n),A=!1})).catch((e=>{console.error("Fetch failed:",e),A=!1}))}E();let C=0;window.addEventListener("scroll",(()=>{const e=Date.now();e-C>200&&(window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&E(),C=e)}))}}));