function fadeInElements(){let e=0;const t=document.querySelectorAll(".fade-in-element:not(.visible),.art-collection .image-wrapper:not(.visible),.art-collection h3:not(.visible),.art-collection h4:not(.visible)");!function(e,t=66){if(!e||"function"!=typeof e)return;let n;window.addEventListener("scroll",(function(i){window.clearTimeout(n),n=setTimeout(e,t)}),!1)}((function(){e=0}));const n=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const i=50*e;((e,t)=>{setTimeout((()=>{e.classList.add("visible")}),t)})(t.target,i),n.unobserve(t.target),e++}}))}));t.forEach((e=>n.observe(e)))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("menu-button"),t=document.getElementById("navigation-items");e.addEventListener("click",(()=>{t.classList.toggle("invis"),document.body.classList.toggle("no-scroll")}));document.getElementById("close-button").addEventListener("click",(()=>{t.classList.toggle("invis"),document.body.classList.toggle("no-scroll")}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("bgSwitch").offsetTop;window.addEventListener("scroll",(()=>{0===window.scrollY?document.body.classList.remove("subtle-bg"):window.scrollY+140>=e?document.body.classList.add("subtle-bg"):document.body.classList.remove("subtle-bg")}))})),document.addEventListener("DOMContentLoaded",fadeInElements),document.addEventListener("DOMContentLoaded",(()=>{const e=io.connect("https://cursortrack-026f30916f71.herokuapp.com"),t={},n=document.querySelector("emoji-picker"),i=document.getElementById("chat-icon"),s=document.getElementById("chat-container"),o=document.getElementById("chat-input"),d=document.getElementById("messages"),c=document.getElementById("hidden-div");let a=localStorage.getItem("emoji")||"ðŸ˜€";function l(e,t){let n=e+18;n+s.offsetWidth>window.innerWidth-18&&(n=window.innerWidth-s.offsetWidth-18),s.style.left=n+"px",s.style.top=t-3+"px"}function r(t,n){e.emit("cursorMove",{x:t,y:n,emoji:a,chatActive:!s.classList.contains("hidden"),chatMessage:o.value})}isChatEnabled=JSON.parse(localStorage.getItem("chatEnabled"))||!1,s.classList.toggle("hidden",!isChatEnabled),i.classList.toggle("active",isChatEnabled),n.emoji=a,c.textContent=o.value,o.style.width=c.offsetWidth+2+"px",n.addEventListener("emoji-click",(t=>{a=t.detail.unicode,localStorage.setItem("emoji",a),e.emit("emojiUpdate",{emoji:a})})),i.addEventListener("click",(function(e){if(e.preventDefault(),isChatEnabled=!isChatEnabled,s.classList.toggle("hidden",!isChatEnabled),i.classList.toggle("active",isChatEnabled),o.focus(),localStorage.setItem("chatEnabled",isChatEnabled),isChatEnabled){const e=i.getBoundingClientRect();l(e.left,e.top+window.scrollY+e.height)}})),o.addEventListener("input",(()=>{s.classList.toggle("orange-bg",o.value.length>=40),c.innerHTML=o.value.replace(/ /g,"&nbsp;"),o.style.width=c.offsetWidth+"px",function(){const e=parseFloat(s.style.left)/window.innerWidth,t=parseFloat(s.style.top)+3;r(e,t)}()})),o.addEventListener("keydown",(t=>{"Escape"===t.key&&function(e){e.preventDefault(),isChatEnabled=!1,s.classList.add("hidden")}(t),"Enter"===t.key&&(t.preventDefault(),function(t){e.emit("newMessage",{message:t});const n=document.createElement("div");n.textContent=t,d.appendChild(n),setTimeout((()=>{n.classList.add("fade-out"),setTimeout((()=>{n.remove(),c.innerHTML=o.value.replace(/ /g,"&nbsp;"),o.style.width=c.offsetWidth+2+"px"}),250)}),3e3)}(o.value),o.value="",s.classList.toggle("orange-bg",o.value.length>=40))})),document.addEventListener("mousemove",(function(e){const t=e.clientX/window.innerWidth,n=e.clientY+window.scrollY+20;l(e.clientX,n),r(t,n)})),document.addEventListener("click",(e=>{const{target:t}=e;!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(t.tagName)&&isChatEnabled&&o.focus()}));const u=document.getElementById("emojiPickerButton"),m=document.getElementById("emojiPickerContainer");u.addEventListener("click",(e=>{m.classList.toggle("hidden"),u.classList.toggle("active")})),u.textContent=a,n.addEventListener("emoji-click",(e=>{u.classList.remove("active"),m.classList.add("hidden"),document.getElementById("emojiPickerButton").textContent=e.detail.unicode})),e.on("emojiUpdate",(e=>{const{userId:n,emoji:i}=e;!function(e,n){const i=t[e];i&&(i.innerText=n)}(n,i)})),e.on("cursorMove",(n=>{const i=n.x*window.innerWidth,s=n.y;let o=t[n.userId];o||(o=document.createElement("div"),o.classList.add("emojiCursor"),o.innerText=n.emoji,document.body.appendChild(o),t[n.userId]=o),o.style.left=i+"px",o.style.top=s+"px",function(t,n){if(e.id!==n.userId){let e=t.querySelector(".speech-bubble");e||(e=document.createElement("div"),e.classList.add("speech-bubble"),t.appendChild(e)),n.chatMessage&&""!==n.chatMessage.trim()?(e.innerText=n.chatMessage,e.style.display="block"):e.style.display="none"}else{const e=t.querySelector(".speech-bubble");e&&(e.style.display="none")}}(o,n)})),e.on("cursorLeave",(e=>{const n=t[e.id];n&&(n.remove(),delete t[e.id])})),function(){const t=window.location.pathname;e.emit("pageChange",{page:t})}()}));const imgObserver=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target;replaceImageWithVideo(n),setSrcSetAndSizes(n),t.unobserve(n)}}))}),{rootMargin:"0px 0px 200px 0px"}),replaceImageWithVideo=e=>{const t=e.getAttribute("data-video");if(t){const n=document.createElement("video");n.src=t,n.style.objectFit="cover",n.setAttribute("playsinline",""),n.setAttribute("muted",""),n.playbackRate=1,n.addEventListener("ended",(()=>n.pause()));const i=e.closest(".image-wrapper");i&&(e.replaceWith(n),i.addEventListener("transitionend",(()=>{n.play()})))}},setSrcSetAndSizes=e=>{const t=e.clientWidth,n="https://ik.imagekit.io/UltraDAO/wallace_collection/",i=e.src.split("/").pop().split("?")[0],s=e.getAttribute("data-max-width");if(s&&s<=t)e.src=`${n}${i}?tr=q-70`;else{let o=t,d=2*t,c=3*t,a=4*t;s&&(o=Math.min(s,o),d=Math.min(s,d),c=Math.min(s,c),a=Math.min(s,a));const l=`${n}${i}?tr=w-${o},q-70 1x,\n                            ${n}${i}?tr=w-${d},q-70 2x,\n                            ${n}${i}?tr=w-${c},q-70 3x`,r=`(max-width: 400px) ${o}px,\n                        (max-width: 800px) ${d}px,\n                        (max-width: 1200px) ${c}px,\n                        ${a}px`;e.src=`${n}${i}?tr=w-${o},q-70`,e.srcset=l,e.sizes=r}e.classList.add("loaded")},cardObserver=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target;setBackground(n),t.unobserve(n)}}))}),{rootMargin:"0px 0px 200px 0px"}),setBackground=e=>{const t=e.clientWidth,n=window.devicePixelRatio||1,i=e.style.backgroundImage,[s,o]=i.slice(5,-2).split("?"),d=`${s}?tr=w-${Math.round(t*n)},q-70`;e.style.backgroundImage=`url("${d}")`,e.classList.add("loaded")};document.querySelectorAll(".bg-image-card").forEach((e=>{cardObserver.observe(e)}));