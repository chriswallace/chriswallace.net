function initHomepageAnimations(){const e=document.querySelector(".hero-section"),t=document.querySelector(".hero-label"),n=document.querySelector(".hero-title"),o=document.querySelector(".hero-description"),i=document.querySelector(".hero-buttons"),s=document.querySelector(".hero-wallace-logo"),r=document.querySelector(".credibility-content");if(e){const a=gsap.timeline(),l=e.querySelector(".hero-content");l&&gsap.set(l.querySelectorAll(".reveal"),{filter:"blur(10px)",opacity:0}),r&&e.contains(r)&&gsap.set(r,{filter:"blur(10px)",opacity:0}),n&&"undefined"!=typeof Splitting&&(Splitting({target:n,by:"chars"}),n.offsetHeight),s&&(gsap.set(s,{filter:"blur(10px)",opacity:0}),gsap.to(s,{filter:"blur(0px)",opacity:.15,duration:.4,ease:"power2.out",onComplete:()=>s.classList.add("visible")})),a.to(t?.closest(".reveal")||t,{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out"}).to(n,{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out"},"-=0.2").to(o,{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out"},"-=0.2").to(i,{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out"},"-=0.2"),r&&e.contains(r)&&a.to(r,{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out"},"-=0.2"),a.eventCallback("onComplete",(()=>{if(l&&l.querySelectorAll(".reveal").forEach((e=>e.classList.add("visible"))),r&&e.contains(r)&&r.classList.add("visible"),n&&"undefined"!=typeof Splitting){const e=Array.from(n.querySelectorAll(".char")).filter((e=>""!==e.textContent.trim()));if(e.length>0){gsap.set(e,{fontVariationSettings:'"wght" 100, "wdth" 500'});const t=()=>{const t=e[Math.floor(Math.random()*e.length)],n=Math.random()>.5?200:500;gsap.to(t,{fontVariationSettings:`"wght" 100, "wdth" ${n}`,duration:1.2+.8*Math.random(),ease:"power2.inOut"})};setTimeout((()=>{const e=3+Math.floor(3*Math.random());for(let n=0;n<e;n++)setTimeout((()=>{t()}),100*n);const n=()=>{const e=100+150*Math.random();setTimeout((()=>{t(),n()}),e)};n()}),500)}}}))}const a=document.querySelector(".cta-banner"),l=document.querySelector(".cta-text"),d=document.querySelector(".cta-button"),c=document.querySelector(".cta-banner img");a&&l&&gsap.fromTo(l,{filter:"blur(10px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out",scrollTrigger:{trigger:a,start:"top 80%",toggleActions:"play none none reverse",onEnter:()=>l.classList.add("visible")}}),d&&gsap.fromTo(d,{filter:"blur(10px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:.4,delay:.05,ease:"power2.out",scrollTrigger:{trigger:a,start:"top 80%",toggleActions:"play none none reverse",onEnter:()=>d.classList.add("visible")}}),c&&gsap.fromTo(c,{filter:"blur(10px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out",scrollTrigger:{trigger:a,start:"top 80%",toggleActions:"play none none reverse"}});const h=document.querySelectorAll(".work-item");h.length>0&&(gsap.set(h,{filter:"blur(10px)",opacity:0}),h.forEach(((e,t)=>{gsap.fromTo(e,{filter:"blur(10px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out",scrollTrigger:{trigger:e,start:"top 88%",toggleActions:"play none none reverse",onEnter:()=>e.classList.add("visible")}})})));const u=document.querySelector(".testimonials-section"),p=document.querySelector(".testimonials-title");p&&gsap.fromTo(p,{filter:"blur(10px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out",scrollTrigger:{trigger:u,start:"top 75%",toggleActions:"play none none reverse",onEnter:()=>p.classList.add("visible")}});document.querySelector(".approach-section");const v=document.querySelectorAll(".process-card"),m=document.querySelector(".engagements");v.length>0&&v.forEach(((e,t)=>{gsap.fromTo(e,{filter:"blur(10px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:.4,delay:.05*t,ease:"power2.out",scrollTrigger:{trigger:".approach-circle",start:"top 70%",toggleActions:"play none none reverse"}})}));const g=document.querySelectorAll(".engagement-column");g.length>0&&g.forEach(((e,t)=>{gsap.fromTo(e,{filter:"blur(10px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:.4,delay:.05*t,ease:"power2.out",scrollTrigger:{trigger:m,start:"top 75%",toggleActions:"play none none reverse"}})}));const y=document.querySelector(".footer-section"),f=document.querySelector(".footer-top"),b=document.querySelector(".footer-bottom");f&&gsap.fromTo(f,{filter:"blur(10px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out",scrollTrigger:{trigger:y,start:"top 80%",toggleActions:"play none none reverse",onEnter:()=>f.classList.add("visible")}}),b&&gsap.fromTo(b,{filter:"blur(10px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:.4,delay:.15,ease:"power2.out",scrollTrigger:{trigger:b,start:"top bottom",toggleActions:"play none none reverse",onEnter:()=>b.classList.add("visible")}});const w=document.createElement("div");w.className="scroll-progress",w.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    height: 2px;\n    background: var(--color-green-accent);\n    transform-origin: left;\n    transform: scaleX(0);\n    z-index: 9999;\n    pointer-events: none;\n  ",document.body.appendChild(w),gsap.to(w,{scaleX:1,ease:"none",scrollTrigger:{trigger:document.body,start:"top top",end:"bottom bottom",scrub:.3}});document.querySelectorAll(".reveal:not(.visible)").forEach((e=>{e.closest(".hero-section")||e===b||gsap.fromTo(e,{filter:"blur(10px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out",scrollTrigger:{trigger:e,start:"top 88%",toggleActions:"play none none none",onEnter:()=>e.classList.add("visible")}})}));const x=document.querySelectorAll(".nav-link"),L=document.querySelector(".site-logo-link"),k=document.querySelector(".nav-cta");L&&(gsap.set(L,{filter:"blur(10px)",opacity:0}),gsap.to(L,{filter:"blur(0px)",opacity:1,duration:.4,ease:"power2.out",onComplete:()=>L.classList.add("visible")})),x.length>0&&(gsap.set(x,{filter:"blur(10px)",opacity:0}),x.forEach(((e,t)=>{gsap.to(e,{filter:"blur(0px)",opacity:1,duration:.4,delay:.05*t,ease:"power2.out",onComplete:()=>e.classList.add("visible")})}))),k&&(gsap.set(k,{filter:"blur(10px)",opacity:0}),gsap.to(k,{filter:"blur(0px)",opacity:1,duration:.4,delay:.05*x.length,ease:"power2.out",onComplete:()=>k.classList.add("visible")}))}document.addEventListener("DOMContentLoaded",(()=>{(window.location.pathname.startsWith("/portfolio/")||"/portfolio"===window.location.pathname)&&document.body.classList.add("portfolio-page");const e=document.getElementById("mobile-menu-toggle"),t=document.getElementById("mobile-menu"),n=document.getElementById("mobile-menu-overlay"),o=document.querySelectorAll(".mobile-menu-link"),i=document.querySelectorAll(".nav-link"),s=document.getElementById("site-navbar");if(s){let e=0,t=50,n=!1;window.addEventListener("scroll",(()=>{n||(window.requestAnimationFrame((()=>{const o=window.pageYOffset;o>100?s.classList.add("scrolled"):(s.classList.remove("scrolled"),s.classList.remove("nav-hidden")),o>t&&(o>e?s.classList.add("nav-hidden"):s.classList.remove("nav-hidden")),e=o,n=!1})),n=!0)}))}if(!e||!t)return;e.addEventListener("click",(e=>{e.stopPropagation();t.classList.contains("open")?l():a()})),n&&n.addEventListener("click",(()=>{l()})),o.forEach((e=>{e.addEventListener("click",(()=>{l()}))})),document.addEventListener("keydown",(n=>{"Escape"===n.key&&t.classList.contains("open")&&(l(),e.focus())}));let r=0;function a(){t.classList.add("open"),e.classList.add("open"),n&&n.classList.add("open"),s&&s.classList.add("menu-open"),e.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden"}function l(){t.classList.remove("open"),e.classList.remove("open"),n&&n.classList.remove("open"),s&&s.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"),document.body.style.overflow=""}e.addEventListener("touchstart",(e=>{r=e.touches[0].clientY}),{passive:!0}),e.addEventListener("touchend",(e=>{e.changedTouches[0].clientY-r>20&&!t.classList.contains("open")&&a()}),{passive:!0}),t.addEventListener("touchstart",(e=>{r=e.touches[0].clientY}),{passive:!0}),t.addEventListener("touchend",(e=>{const n=e.changedTouches[0].clientY;r-n>40&&t.classList.contains("open")&&l()}),{passive:!0}),i.forEach((e=>{e.addEventListener("click",(()=>{l()}))})),window.addEventListener("scroll",(function(){const e=document.querySelectorAll("section[id]");let t="";e.forEach((e=>{const n=e.offsetTop-200;window.pageYOffset>=n&&(t=e.getAttribute("id"))})),o.forEach((e=>{e.classList.remove("active"),e.getAttribute("href")==="#"+t&&e.classList.add("active")}))}))})),document.addEventListener("DOMContentLoaded",(()=>{gsap.registerPlugin(ScrollTrigger),Promise.all([document.fonts.ready,new Promise((e=>setTimeout(e,100)))]).then((()=>{initHomepageAnimations()}))}));class VideoPlayer extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.hasInteracted=!1,this.hideControlsTimeout=null,this.isSeeking=!1,this.wasPlaying=!1,this.observer=null,this.fadeoutTimeout=null,this.isTouchDevice=!1}connectedCallback(){if(this.isTouchDevice=window.matchMedia("(hover: none) and (pointer: coarse)").matches,this.render(this.isTouchDevice),this.video=this.shadowRoot.querySelector("video"),this.videoContainer=this,this.isTouchDevice||(this.playButton=this.shadowRoot.querySelector("#playButton"),this.muteButton=this.shadowRoot.querySelector("#muteButton"),this.fullscreenButton=this.shadowRoot.querySelector("#fullscreenButton"),this.videoOverlay=this.shadowRoot.querySelector(".video-overlay"),this.controls=this.shadowRoot.querySelector(".controls"),this.progressBar=this.shadowRoot.querySelector(".progress-bar"),this.progressBarFill=this.shadowRoot.querySelector(".progress-bar-fill")),this.video){{const e=this.hasAttribute("muted"),t=this.isTouchDevice&&e||this.hasAttribute("autoplay");this.isTouchDevice||(this.updateMuteButtonIcon(!0),this.playButton?.addEventListener("click",(()=>this.togglePlay())),this.videoOverlay?.addEventListener("click",(()=>this.togglePlay())),this.muteButton?.addEventListener("click",(()=>this.toggleMute())),this.fullscreenButton?.addEventListener("click",(()=>this.toggleFullscreen())),this.progressBar?.addEventListener("mousedown",(e=>this.startSeeking(e))),this.progressBar?.addEventListener("mousemove",(e=>this.seeking(e))),this.progressBar?.addEventListener("mouseup",(()=>this.endSeeking())),this.progressBar?.addEventListener("mouseleave",(()=>this.endSeeking())),this.addEventListener("mousemove",(()=>this.showControls())),this.addEventListener("mouseleave",(()=>this.hideControls()))),this.video.addEventListener("play",(()=>{this.classList.remove("paused"),this.updatePlayButtonIcon(!1),this.showControls(!0)})),this.video.addEventListener("pause",(()=>{this.classList.add("paused"),this.updatePlayButtonIcon(!0)})),this.video.addEventListener("timeupdate",(()=>this.updateProgressBar())),document.addEventListener("visibilitychange",(()=>this.handleVisibilityChange())),this.video.muted=e||t,this.isTouchDevice?(this.video.disablePictureInPicture=!0,this.video.setAttribute("playsinline",""),this.video.setAttribute("webkit-playsinline",""),t&&this.video.play().catch((e=>{console.log("Mobile autoplay failed:",e)}))):this.hasAttribute("autoplay")?(this.video.play().catch((e=>{console.log("Autoplay failed:",e),this.classList.add("paused")})),this.updatePlayButtonIcon(!1)):(this.classList.add("paused"),this.updatePlayButtonIcon(!0)),this.video.loop=this.hasAttribute("loop")}this.setupIntersectionObserver(),this.volumeBars=this.shadowRoot.querySelector("#volumeBars"),this.volumeBars?.addEventListener("click",(e=>this.handleVolumeBarClick(e))),this.updateVolumeBars(this.video.volume),this.video.paused&&this.showControls(),document.addEventListener("fullscreenchange",(()=>this.handleFullscreenChange())),this.setupAccessibilityFeatures(),this.video.addEventListener("loadedmetadata",(()=>{this.setupCaptions()}))}else console.error("Required video element not found")}render(e=!1){const t=this.getAttribute("video-mp4"),n=this.getAttribute("video-webm"),o=this.getAttribute("video-url"),i=this.getAttribute("video-poster"),s=this.getAttribute("video-title"),r=this.getAttribute("video-description"),a=this.hasAttribute("muted"),l=(this.hasAttribute("playsinline"),e&&a||this.hasAttribute("autoplay")),d=this.hasAttribute("loop");let c="";n&&(c+=`<source src="${n}" type="video/webm">`),t&&(c+=`<source src="${t}" type="video/mp4">`),t||n||!o||(c+=`<source src="${o}" type="video/mp4">`),this.shadowRoot.innerHTML=`\n      <style>\n        :host {\n          display: flex;\n          position: relative;\n          justify-content: center;\n          align-items: center;\n          background-color: black;\n          overflow: hidden;\n          --theme-color: var(--video-theme-color, currentColor);\n          text-align: left;\n          container-type: inline-size;\n        }\n\n        :host(:fullscreen) {\n          border-radius: 0 !important;\n        }\n\n        .video {\n          pointer-events: ${e?"auto":"none"};\n          z-index: 10;\n        }\n\n        .video-info {\n          position: static;\n          padding: 0 24px;\n          color: white;\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);\n          margin-bottom: 12px;\n        }\n\n        .video-info h2 {\n          margin: 0 0 4px;\n          font-size: 22px;\n          font-weight: 700;\n        }\n\n        .video-info p {\n          margin: 0;\n          font-size: 14px;\n          line-height: 18px;\n          opacity: 0.74;\n        }\n\n        .video-info h2,\n        .video-info p {\n          overflow: hidden;\n          display: -webkit-box;\n          -webkit-line-clamp: 1;\n          line-clamp: 1;\n          -webkit-box-orient: vertical;\n        }\n\n        :host(.paused) .video-info { opacity: 1; }\n\n        ${e?"":"\n          .video {\n            pointer-events: none;\n            z-index: 10;\n            width: 100%;\n            height: auto;\n          }\n\n          .video-overlay {\n            position: absolute;\n            top: -1px;\n            right: -1px;\n            bottom: -1px;\n            left: -1px;\n            z-index: 20;\n            opacity: 0;\n            background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 80%);\n            cursor: pointer;\n            transition: opacity 0.3s ease;\n          }\n\n          .controls {\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            z-index: 40;\n            display: flex;\n            flex-direction: column;\n            pointer-events: auto;\n            opacity: 1;\n            transition: opacity 0.3s ease;\n            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);\n            padding-bottom: 8px;\n          }\n\n          .play-info-container {\n            display: flex;\n            align-items: center;\n            gap: 16px;\n            opacity: 1;\n            pointer-events: none;\n            transition: opacity 0.3s ease;\n          }\n\n          .play-info-container:has(.video-info) {\n            justify-content: flex-start;\n            margin-left: 24px;\n          }\n\n          .play-info-container:not(:has(.video-info)) {\n            justify-content: center;\n          }\n\n          .left-controls {\n            display: flex;\n            align-items: center;\n            gap: 8px;\n          }\n\n          .play-button { position: static; display: flex; cursor: pointer; }\n\n          .play-button-inner {\n            display: flex;\n            padding: 0 14px 0 24px;\n            height: 100%;\n            align-items: center;\n            justify-content: center;\n            opacity: 0.85;\n          }\n\n          .progress-bar-container {\n            grid-row: 1;\n            height: 24px;\n            display: flex;\n            align-items: center;\n          }\n\n          .progress-bar {\n            width: 100%;\n            height: 4px;\n            background: rgba(255, 255, 255, 0.2);\n            position: relative;\n            cursor: pointer;\n            margin: 10px 0;\n          }\n\n          .progress-bar:hover {\n            height: 8px;\n            margin-top: 8px;\n            margin-bottom: 8px;\n          }\n\n          .progress-bar-fill {\n            position: absolute;\n            top: 0;\n            left: 0;\n            height: 100%;\n            background: var(--theme-color);\n            width: 0%;\n            transition: width 0.1s linear;\n          }\n\n          .seek-handle {\n            position: absolute;\n            top: 50%;\n            transform: translate(-50%, -50%);\n            width: 12px;\n            height: 12px;\n            background: var(--theme-color);\n            border-radius: 50%;\n            opacity: 0;\n            transition: opacity 0.2s;\n            pointer-events: none;\n          }\n\n          .progress-bar:hover .seek-handle { opacity: 1; }\n\n          .play-button svg { width: 24px; height: 24px; fill: white; stroke: transparent; }\n\n          button {\n            background-color: transparent;\n            border: none;\n            color: white;\n            padding-top: 16px;\n            padding-bottom: 12px;\n            padding-left: 16px;\n            padding-right: 16px;\n            cursor: pointer;\n            border-radius: 4px;\n            transition: background-color 0.3s, transform 0.3s;\n          }\n\n          button:hover { transform: scale(1.05); }\n          button:active { transform: scale(0.95); }\n\n          .icon { width: 24px; height: 24px; stroke: var(--theme-color); stroke-width: 1.5px; }\n\n          .sr-only {\n            position: absolute;\n            width: 1px;\n            height: 1px;\n            padding: 0;\n            margin: -1px;\n            overflow: hidden;\n            clip: rect(0, 0, 0, 0);\n            white-space: nowrap;\n            border: 0;\n          }\n\n          .button-group { display: flex; align-items: center; gap: 0; }\n\n          /* Hide controls by default */\n          .controls { opacity: 0; }\n          .video-overlay { opacity: 0; }\n\n          :host([data-has-interacted]:hover) .controls { opacity: 1; }\n          :host([data-has-interacted]:hover) .video-overlay { opacity: 0.4; }\n\n          :host(.paused[data-has-interacted]) .controls { opacity: 1; }\n          :host(.paused[data-has-interacted]) .video-overlay { opacity: 1; }\n\n          /* Initial state styles */\n          :host(.paused:not([data-has-interacted])) .controls { opacity: 1; }\n          :host(.paused:not([data-has-interacted])) .video-overlay { opacity: 1; }\n\n          .buttons-container {\n            display: flex;\n            justify-content: space-between;\n          }\n\n          .volume-bars {\n            display: flex;\n            align-items: flex-end;\n            justify-content: space-between;\n            gap: 0;\n            height: 18px;\n            padding: 0;\n            width: calc(4px * 5);\n            cursor: pointer;\n          }\n\n          .volume-bar {\n            width: 4px;\n            opacity: 0.3;\n            transition: opacity 0.2s, height 0.2s;\n            cursor: pointer;\n            position: relative;\n            height: 20px;\n          }\n\n          .volume-bar:after {\n            content: '';\n            position: absolute;\n            background: white;\n            bottom: 0;\n            left: 50%;\n            transform: translateX(-50%);\n            width: 2px;\n            height: 100%;\n          }\n\n          .volume-bar.active { opacity: 1; }\n\n          .volume-bar:nth-child(1):after { height: 3px; }\n          .volume-bar:nth-child(2):after { height: 7px; }\n          .volume-bar:nth-child(3):after { height: 11px; }\n          .volume-bar:nth-child(4):after { height: 15px; }\n          .volume-bar:nth-child(5):after { height: 19px; }\n\n          .time-display {\n            color: white;\n            font-size: 14px;\n            padding: 2px 12px 0;\n            opacity: 0.9;\n            font-variant-numeric: tabular-nums;\n            display: flex;\n            align-items: center;\n          }\n\n          .right-controls { display: flex; align-items: center; }\n\n          button:focus-visible,\n          .progress-bar:focus-visible {\n            outline: 2px solid var(--theme-color);\n            outline-offset: 2px;\n          }\n\n          @media (forced-colors: active) {\n            .icon { forced-color-adjust: auto; }\n            .progress-bar-fill { background: CanvasText; }\n          }\n        "}\n      </style>\n\n      ${e?"":'<div class="video-overlay"></div>'}\n\n      <video \n        id="video" \n        class="video" \n        width="100%"\n        preload="metadata"\n        ${a?"muted":""} \n        playsinline\n        webkit-playsinline\n        ${e?"controls":""}\n        ${i?`poster="${i}"`:""}\n        ${l?"autoplay":""}\n        ${d?"loop":""}\n        ${e?"disablePictureInPicture":""}\n      >\n        ${c}\n        Your browser does not support HTML5 video.\n      </video>\n\n      ${e?"":`\n        <div class="controls">\n          <div class="controls-bottom">\n            ${s||r?`\n              <div class="video-info">\n                ${s?`<h2>${s}</h2>`:""}\n                ${r?`<p>${r}</p>`:""}\n              </div>\n            `:""}\n\n            <div class="progress-bar-container">\n              <div class="progress-bar">\n                <div class="progress-bar-fill"></div>\n                <div class="seek-handle"></div>\n              </div>\n            </div>\n\n            <div class="buttons-container">\n              <div class="left-controls">\n                <div class="button-group">\n                  <div id="playButton" class="play-button">\n                    <div class="play-button-inner">\n                      <svg width="14" height="16" viewBox="0 0 14 16" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M0.5 14.3507V1.64929C0.5 0.871991 1.34797 0.391878 2.0145 0.791793L12.599 7.14251C13.2464 7.53091 13.2464 8.46909 12.599 8.85749L2.0145 15.2082C1.34797 15.6081 0.5 15.128 0.5 14.3507Z" stroke-linecap="round" stroke-linejoin="round"/>\n                      </svg>\n                    </div>\n                    <span class="sr-only">Play</span>\n                  </div>\n\n                  <button id="muteButton">\n                    <span class="sr-only">Mute</span>\n                  </button>\n\n                  <div id="volumeBars" class="volume-bars">\n                    <div class="volume-bar" data-volume="0.2"></div>\n                    <div class="volume-bar" data-volume="0.4"></div>\n                    <div class="volume-bar" data-volume="0.6"></div>\n                    <div class="volume-bar" data-volume="0.8"></div>\n                    <div class="volume-bar" data-volume="1.0"></div>\n                  </div>\n                </div>\n              </div>\n\n              <div class="right-controls">\n                <div class="time-display">0:00 / 0:00</div>\n                <button id="fullscreenButton">\n                  <svg class="icon" id="fullscreenIcon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                    <path d="M8 3H5a2 2 0 0 0-2 2v3"/><path d="M21 8V5a2 2 0 0 0-2-2h-3"/><path d="M3 16v3a2 2 0 0 0 2 2h3"/><path d="M16 21h3a2 2 0 0 0 2-2v-3"/>\n                  </svg>\n                  <span class="sr-only">Fullscreen</span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      `}\n    `}togglePlay(){if(this.video.paused){this.hasAttribute("autoplay")||(this.video.muted=!1,this.updateMuteButtonIcon(!1)),this.video.play(),this.classList.remove("paused"),this.updatePlayButtonIcon(!1),this.hasInteracted=!0,this.setAttribute("data-has-interacted",""),this.style.setProperty("--controls-opacity","1");const e=this.shadowRoot.querySelector(".controls");e&&(e.style.opacity="1",e.style.bottom="0"),this.showControls(!0)}else this.video.pause(),this.classList.add("paused"),this.updatePlayButtonIcon(!0),clearTimeout(this.hideControlsTimeout),this.showControls(!0)}updatePlayButtonIcon(e){const t=this.shadowRoot.querySelector("#playButton .play-button-inner");t&&(t.innerHTML=e?'\n      <svg width="14" height="16" viewBox="0 0 14 16" fill="white" xmlns="http://www.w3.org/2000/svg">\n        <path d="M0.5 14.3507V1.64929C0.5 0.871991 1.34797 0.391878 2.0145 0.791793L12.599 7.14251C13.2464 7.53091 13.2464 8.46909 12.599 8.85749L2.0145 15.2082C1.34797 15.6081 0.5 15.128 0.5 14.3507Z"/>\n      </svg>\n    ':'\n      <svg width="14" height="16" viewBox="0 0 14 16" fill="white" xmlns="http://www.w3.org/2000/svg">\n        <rect x="2" y="0.5" width="3" height="15" rx="1"/>\n        <rect x="9" y="0.5" width="3" height="15" rx="1"/>\n      </svg>\n    ')}toggleMute(){this.video.muted=!this.video.muted,this.updateMuteButtonIcon(this.video.muted),this.updateVolumeBars(this.video.muted?0:this.video.volume),this.hasInteracted=!0,this.setAttribute("data-has-interacted",""),this.style.setProperty("--controls-opacity","1"),this.hideControlsIfPlaying(),this.showControls(!0)}updateMuteButtonIcon(e){this.muteButton&&(this.muteButton.innerHTML=e?'\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-volume-x icon">\n        <path d="M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"/>\n        <path d="m18 12 4-4"/>\n        <path d="m22 12-4-4"/>\n      </svg>\n      <span class="sr-only">Unmute</span>\n    ':'\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-volume-2 icon">\n        <path d="M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"/>\n        <path d="M16 9a5 5 0 0 1 0 6"/>\n        <path d="M19.364 18.364a9 9 0 0 0 0-12.728"/>\n      </svg>\n      <span class="sr-only">Mute</span>\n    ')}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen().catch((e=>console.log("Exit fullscreen failed:",e))):this.videoContainer.requestFullscreen().catch((e=>console.log("Fullscreen failed:",e))),this.fullscreenButton&&(this.fullscreenButton.innerHTML=document.fullscreenElement?'\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-minimize icon">\n        <path d="M8 3v3a2 2 0 0 1-2 2H3"/><path d="M21 8h-3a2 2 0 0 1-2-2V3"/><path d="M3 16h3a2 2 0 0 1 2 2v3"/><path d="M16 21v-3a2 2 0 0 1 2-2h3"/>\n      </svg>\n    ':'\n      <svg class="icon" id="fullscreenIcon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n        <path d="M8 3H5a2 2 0 0 0-2 2v3"/><path d="M21 8V5a2 2 0 0 0-2-2h-3"/><path d="M3 16v3a2 2 0 0 0 2 2h3"/><path d="M16 21h3a2 2 0 0 0 2-2v-3"/>\n      </svg>\n    ')}hideControlsIfPlaying(){this.video.paused||this.video.muted||!this.controls||this.controls.classList.add("opacity-0")}showControls(e=!1){clearTimeout(this.hideControlsTimeout),this.controls&&(this.controls.style.opacity="1"),this.videoOverlay&&(this.videoOverlay.style.opacity="0.4"),this.video.paused&&!e||(this.hideControlsTimeout=setTimeout((()=>{this.hideControls()}),2e3))}hideControls(){clearTimeout(this.fadeoutTimeout),this.video.paused||this.isSeeking||(this.controls&&(this.controls.style.opacity="0"),this.videoOverlay&&(this.videoOverlay.style.opacity="0"))}handleVisibilityChange(){document.hidden&&this.video.pause()}updateProgressBar(){if(this.video.duration&&this.progressBarFill){const e=this.video.currentTime/this.video.duration*100;this.progressBarFill.style.width=`${e}%`;const t=this.shadowRoot.querySelector(".seek-handle");t&&(t.style.left=`${e}%`);const n=this.shadowRoot.querySelector(".time-display");n&&(n.textContent=`${this.formatTime(this.video.currentTime)} / ${this.formatTime(this.video.duration)}`)}}startSeeking(e){this.isSeeking=!0,this.seeking(e),clearTimeout(this.hideControlsTimeout)}seeking(e){if(!this.isSeeking||!this.progressBar)return;const t=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX,n=this.progressBar.getBoundingClientRect(),o=(t-n.left)/n.width,i=Math.max(0,Math.min(1,o)),s=i*this.video.duration;this.progressBarFill&&(this.progressBarFill.style.width=100*i+"%");const r=this.shadowRoot.querySelector(".seek-handle");r&&(r.style.left=100*i+"%"),this.video.currentTime=s}endSeeking(){this.isSeeking=!1,this.showControls()}setupIntersectionObserver(){this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.wasPlaying&&this.video.muted&&this.video.play().catch((()=>{console.log("Auto-resume failed")})):(this.wasPlaying=!this.video.paused,this.video.paused||this.video.pause())}))}),{threshold:.2}),this.observer.observe(this)}disconnectedCallback(){this.observer&&this.observer.disconnect()}handleVolumeBarClick(e){if(e.target.classList.contains("volume-bar")){const t=parseFloat(e.target.dataset.volume);this.video.volume=t,this.video.muted=!1,this.updateMuteButtonIcon(!1),this.updateVolumeBars(t)}}updateVolumeBars(e){this.shadowRoot.querySelectorAll(".volume-bar").forEach((t=>{parseFloat(t.dataset.volume)<=e?t.classList.add("active"):t.classList.remove("active")}))}handleFullscreenChange(){this.fullscreenButton&&(this.fullscreenButton.innerHTML=document.fullscreenElement?'\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-minimize icon">\n        <path d="M8 3v3a2 2 0 0 1-2 2H3"/><path d="M21 8h-3a2 2 0 0 1-2-2V3"/><path d="M3 16h3a2 2 0 0 1 2 2v3"/><path d="M16 21v-3a2 2 0 0 1 2-2h3"/>\n      </svg>\n    ':'\n      <svg class="icon" id="fullscreenIcon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n        <path d="M8 3H5a2 2 0 0 0-2 2v3"/><path d="M21 8V5a2 2 0 0 0-2-2h-3"/><path d="M3 16v3a2 2 0 0 0 2 2h3"/><path d="M16 21h3a2 2 0 0 0 2-2v-3"/>\n      </svg>\n    '),document.fullscreenElement&&this.showControls(!0)}formatTime(e){return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}setupAccessibilityFeatures(){[this.playButton,this.muteButton,this.volumeBars,this.progressBar,this.fullscreenButton].forEach(((e,t)=>{e&&e.setAttribute("tabindex",t+1)})),this.video.setAttribute("aria-label",this.getAttribute("video-title")||"Video player"),this.progressBar?.setAttribute("role","slider"),this.progressBar?.setAttribute("aria-label","Progress"),this.progressBar?.setAttribute("aria-valuemin","0"),this.progressBar?.setAttribute("aria-valuemax","100"),this.progressBar?.setAttribute("aria-valuenow","0"),this.setupKeyboardControls()}setupCaptions(){const e=this.video.textTracks;if(e.length>0){const t=document.createElement("button");t.innerHTML='\n        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">\n          <path d="M21 5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5z"/>\n          <path d="M7 8h3m-3 4h7m-7 4h3"/>\n          <path d="M14 8h3m-3 4h3m-3 4h3"/>\n        </svg>\n        <span class="sr-only">Toggle Captions</span>\n      ',t.setAttribute("aria-label","Toggle closed captions");const n=this.shadowRoot.querySelector(".right-controls");n?.insertBefore(t,this.fullscreenButton);let o=!1;t.addEventListener("click",(()=>{o=!o,Array.from(e).forEach((e=>{"captions"!==e.kind&&"subtitles"!==e.kind||(e.mode=o?"showing":"hidden")})),t.setAttribute("aria-pressed",o)}))}}setupKeyboardControls(){this.addEventListener("keydown",(e=>{switch(e.key){case" ":case"k":e.preventDefault(),this.togglePlay();break;case"m":e.preventDefault(),this.toggleMute();break;case"f":e.preventDefault(),this.toggleFullscreen();break;case"ArrowLeft":e.preventDefault(),this.video.currentTime=Math.max(0,this.video.currentTime-5);break;case"ArrowRight":e.preventDefault(),this.video.currentTime=Math.min(this.video.duration,this.video.currentTime+5);break;case"ArrowUp":e.preventDefault(),this.video.volume=Math.min(1,this.video.volume+.1),this.updateVolumeBars(this.video.volume);break;case"ArrowDown":e.preventDefault(),this.video.volume=Math.max(0,this.video.volume-.1),this.updateVolumeBars(this.video.volume)}}))}}function fadeInElements(){let e=0;const t=document.querySelectorAll(".fade-in-element:not(.visible)");!function(e,t=66){if(!e||"function"!=typeof e)return;let n;window.addEventListener("scroll",(function(o){window.clearTimeout(n),n=setTimeout(e,t)}),!1)}((function(){e=0}));const n=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const o=50*e;((e,t)=>{setTimeout((()=>{e.classList.add("visible"),e.addEventListener("transitionend",(()=>{e.classList.remove("fade-in-element")}))}),t)})(t.target,o),n.unobserve(t.target),e++}}))}));t.forEach((e=>n.observe(e)))}customElements.define("video-player",VideoPlayer),document.addEventListener("DOMContentLoaded",(()=>{document.fonts.ready.then((()=>{document.querySelectorAll(".hidden-until-loaded").forEach((e=>{e.classList.remove("hidden-until-loaded")})),fadeInElements()}))})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".flip-card").forEach((e=>{e.addEventListener("mouseenter",(()=>{e.classList.add("flipped"),setTimeout((()=>{e.classList.remove("flipped")}),550)}))}))}));class Card extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return["overline","title","media-src","media-type"]}connectedCallback(){this.render()}attributeChangedCallback(){this.render()}render(){const e=this.getAttribute("overline")||"",t=this.getAttribute("title")||"",n=this.getAttribute("media-src")||"",o=this.getAttribute("media-type")||"image",i=this.getAttribute("href")||"",s=`\n      <div class="overlay">\n        <span class="overline">${e}</span>\n        <h3 class="title">${t}</h3>\n      </div>\n      <div class="media-container">\n        ${"video"===o?`<video autoplay muted loop playsinline disablePictureInPicture preload="auto">\n              <source src="${n}" type="video/mp4">\n            </video>`:`<img src="${n}" alt="${t}">`}\n      </div>\n    `;this.shadowRoot.innerHTML=`\n      <style>\n        :host {\n          display: block;\n          position: relative;\n          border-radius: 12px;\n          box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1);\n          overflow: hidden;\n          container-type: inline-size;\n        }\n\n        .overlay {\n          position: absolute;\n          inset: 0;\n          display: flex;\n          flex-direction: column;\n          justify-content: flex-end;\n          background: linear-gradient(to top, rgba(0,0,0,1) 0%, transparent 60%);\n          padding: clamp(0.75rem, 0.5rem + 2vw, 2rem);\n          z-index: 2;\n        }\n\n        .overline {\n          color: white;\n          text-transform: uppercase;\n          letter-spacing: 0.1em;\n          font-size: 0.7rem;\n        }\n\n        .title {\n          color: white;\n          font-size: clamp(1.2rem, 1rem + 2vw, 4rem);\n          font-weight: 400;\n          margin-top: 0.35rem;\n          margin-bottom: 0;\n          max-width: 95%;\n          line-height: 1.25;\n          font-family: "TTCommonsProVariable", serif;\n          text-transform: uppercase;\n          letter-spacing: 0.03em;\n        }\n\n        .media-container {\n          position: relative;\n          width: 100%;\n          height: 100%;\n          overflow: hidden;\n        }\n\n        video, img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n          pointer-events: none;\n          transition: transform 0.3s ease;\n          transform-origin: center;\n        }\n\n        a:hover video,\n        a:hover img{\n          transform: scale(1.05);\n        }\n\n        a .title  {\n          text-decoration-thickness: 4px;\n          text-underline-offset: 4px;\n          text-decoration-style: solid;\n          text-decoration-skip-ink: auto;\n          text-decoration: underline solid rgba(255,255,255,0);\n          transition: text-decoration-color 200ms;\n        }\n      </style>\n      ${i?`<a href="${i}">${s}</a>`:s}\n    `}}customElements.define("media-card",Card);const imgObserver=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target;replaceImageWithVideo(n),setSrcSetAndSizes(n),t.unobserve(n)}}))}),{rootMargin:"0px 0px 200px 0px"}),replaceImageWithVideo=e=>{const t=e.getAttribute("data-video");if(t){const n=document.createElement("video");n.src=t,n.style.objectFit="cover",n.setAttribute("playsinline",""),n.setAttribute("muted",""),n.playbackRate=1,n.addEventListener("ended",(()=>n.pause()));const o=e.closest(".media-wrapper");o&&(e.replaceWith(n),o.addEventListener("transitionend",(()=>{n.play()})))}},setSrcSetAndSizes=e=>{const t=e.clientWidth,n="https://ik.imagekit.io/UltraDAO/wallace/",o=e.src.split("/").pop().split("?")[0],i=e.getAttribute("data-max-width");if(i&&i<=t)e.src=`${n}${o}?tr=q-70`;else{let s=t,r=2*t,a=3*t,l=4*t;i&&(s=Math.min(i,s),r=Math.min(i,r),a=Math.min(i,a),l=Math.min(i,l));const d=`${n}${o}?tr=w-${s},q-70 1x,\n                            ${n}${o}?tr=w-${r},q-70 2x,\n                            ${n}${o}?tr=w-${a},q-70 3x`,c=`(max-width: 400px) ${s}px,\n                        (max-width: 800px) ${r}px,\n                        (max-width: 1200px) ${a}px,\n                        ${l}px`;e.src=`${n}${o}?tr=w-${s},q-70`,e.srcset=d,e.sizes=c}e.classList.add("loaded")},cardObserver=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target;setBackground(n),t.unobserve(n)}}))}),{rootMargin:"0px 0px 200px 0px"}),setBackground=e=>{const t=e.clientWidth,n=window.devicePixelRatio||1,o=e.style.backgroundImage,[i,s]=o.slice(5,-2).split("?"),r=`${i}?tr=w-${Math.round(t*n)},q-70`;e.style.backgroundImage=`url("${r}")`,e.classList.add("loaded")};document.querySelectorAll(".bg-image-card").forEach((e=>{cardObserver.observe(e)})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".zoomable");let t=null,n={};function o(e){const t=n[e];e.style.transition="all 0.3s ease",e.style.top=`${t.top}px`,e.style.left=`${t.left}px`,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.transform="none",setTimeout((()=>{e.parentNode.style.height="",e.classList.remove("zoom-fullscreen"),e.style.zIndex="1",e.style.position="",e.style.top="",e.style.left="",e.style.width="",e.style.height="",e.style.transform="",document.body.style.overflow=""}),300)}e.forEach((e=>{e.style.cursor="zoom-in",e.addEventListener("click",(function(){const i=e.classList.contains("zoom-fullscreen"),s=e.getAttribute("data-type");i?(document.body.classList.remove("zoom-active"),o(e),e.style.cursor="zoom-in","video"===s&&(e.muted=!0)):(t||(t=document.createElement("div"),t.className="page-overlay",document.body.appendChild(t)),document.body.classList.add("zoom-active"),function(e){const t=function(e){const t=e.getBoundingClientRect();return{left:t.left,top:t.top,width:t.width,height:t.height}}(e);n[e]=t;const o=.9*window.innerWidth,i=.9*window.innerHeight,{width:s,height:r}=function(e,t){const n=4/3;return e/t>n?e=t*n:t=e/n,{width:e,height:t}}(o,i);requestAnimationFrame((()=>{e.parentNode.style.height=`${t.height}px`,e.classList.add("zoom-fullscreen"),e.style.top="50%",e.style.left="50%",e.style.width=`${s}px`,e.style.height=`${r}px`,e.style.transform="translate(-50%, -50%)"})),e.style.position="fixed",e.style.top=`${t.top}px`,e.style.left=`${t.left}px`,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.zIndex="9999"}(e),document.body.style.overflow="hidden",e.style.cursor="zoom-out","video"===s&&(e.muted=!1,e.play()))}))})),t&&t.addEventListener("click",(()=>{document.querySelectorAll(".zoom-fullscreen").forEach((e=>{e.classList.remove("zoom-fullscreen"),o(e)})),document.body.classList.remove("active")}));document.querySelectorAll(".image-gallery").forEach((e=>{const t=e.querySelectorAll("img");let n=0,o=null;function i(e){t.forEach(((t,n)=>{t.style.display=n===e?"block":"none"}))}o=setInterval((function(){n=(n+1)%t.length,i(n)}),2e3),i(n)}))}));